{"version":3,"sources":["../assets/scripts/ajax.js"],"names":["jQuery","document","ready","$","checkTitle","elem","html","title","Modernizr","history","on","e","url","this","attr","regx","post_slug","match","split","paged","data","host","window","location","preventDefault","ajax","ajaxadmin","ajaxurl","type","action","done","console","log","pushState","search","find","val","s","state","originalEvent"],"mappings":"AAAAA,OAAAC,UAAAC,MAAA,SAAAC,GACA,QAAAC,GAAAC,GACAF,EAAAE,GAAAC,OACAL,SAAAM,MAAAJ,EAAA,MAAAG,OAEAL,SAAAM,MAAA,eAGAC,UAAAC,UACAN,EAAAF,UAAAS,GAAA,QAAA,uBAAA,SAAAC,GACA,GAAAC,GAAAT,EAAAU,MAAAC,KAAA,QACAC,EAAA,kBACAC,EAAAJ,EAAAK,MAAAF,GAAA,GAAAG,MAAA,KAAA,GACAC,EAAAhB,EAAAU,MAAAO,KAAA,QACAjB,GAAAU,MAAA,GAAAQ,OAAAC,OAAAC,SAAAF,MAAA,KAAAL,IACAL,EAAAa,iBACArB,EAAAsB,MACAb,IAAAc,UAAAC,QACAC,KAAA,OACAR,MACAJ,UAAAA,EACAG,MAAAA,EACAU,OAAA,sBAGAC,KAAA,SAAAV,GACAW,QAAAC,IAAAZ,GACAjB,EAAA,aAAAG,KAAAc,GACAE,OAAAb,QAAAwB,UAAAb,EAAA,QAAAR,GACAR,EAAAD,EAAA,YAIAA,EAAAF,UAAAS,GAAA,SAAA,mBAAA,SAAAC,GACA,GAAAuB,GAAA/B,EAAAU,MAAAsB,KAAA,SAAAC,MACAxB,EAAAT,EAAAU,MAAAC,KAAA,UAAA,UAAAoB,CACAvB,GAAAa,iBACArB,EAAAsB,MACAb,IAAAc,UAAAC,QACAC,KAAA,MACAR,MACAiB,EAAAH,EACAL,OAAA,iBAGAC,KAAA,SAAAV,GACAjB,EAAA,aAAAG,KAAAc,GACAE,OAAAb,QAAAwB,UAAAb,EAAA,QAAAR,GACAR,EAAAD,EAAA,WAGAA,EAAAmB,QAAAZ,GAAA,WAAA,SAAAC,GACA,GAAA2B,GAAA3B,EAAA4B,cAAAD,KACA,QAAAA,IACAnC,EAAA,aAAAG,KAAAgC,GACAlC,EAAAD,EAAA","file":"ajax.js","sourcesContent":["jQuery(document).ready(function($) {\r\n  function checkTitle(elem) {\r\n    if($(elem).html()) {\r\n      document.title = $('h1').html();\r\n    } else {\r\n      document.title = \"Test Website\";\r\n    }\r\n  }\r\n  if(Modernizr.history) {\r\n    $(document).on('click','*:not(#wpadminbar) a',  function(e) {\r\n      var url = $(this).attr('href');\r\n      var regx = '(?:.+\\/)([^#?]+)';\r\n      var post_slug = url.match(regx)[1].split('/')[0];\r\n      var paged = $(this).data('paged');\r\n      if($(this)[0].host === window.location.host || post_slug !== '') {\r\n        e.preventDefault();\r\n        $.ajax({\r\n          url: ajaxadmin.ajaxurl,\r\n          type: 'POST',\r\n          data: {\r\n            'post_slug': post_slug,\r\n            'paged' : paged,\r\n            'action': 'get_post_details'\r\n          }\r\n        })\r\n        .done(function(data) {\r\n            console.log(data);\r\n            $('main.main').html(data);\r\n            window.history.pushState(data, \"Title\", url);\r\n            checkTitle($('h1'));\r\n        });\r\n      }\r\n    });\r\n    $(document).on('submit','form.site-search',  function(e) {\r\n      var search = $(this).find('input').val();\r\n      var url = $(this).attr('action')  + 'search/' + search;\r\n      e.preventDefault();\r\n      $.ajax({\r\n        url: ajaxadmin.ajaxurl,\r\n        type: 'get',\r\n        data: {\r\n          's': search,\r\n          'action': 'ajax_search'\r\n        }\r\n      })\r\n      .done(function(data) {\r\n          $('main.main').html(data);\r\n          window.history.pushState(data, \"Title\", url);\r\n          checkTitle($('h1'));\r\n      });\r\n    });\r\n    $(window).on('popstate', function(e) {\r\n      var state = e.originalEvent.state;\r\n      if(state !== null) {\r\n        $('main.main').html(state);\r\n        checkTitle($('h1'));\r\n      }\r\n    });\r\n  }\r\n});"],"sourceRoot":"assets/scripts/"}